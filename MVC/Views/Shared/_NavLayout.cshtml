@using Domain.Accounts
<!DOCTYPE html>
<html lang="">
<head>
    <!--Meta + Title-->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - CodeForge</title>
    <!--Meta + Title-->
    <!--CSS-->
    <link rel="stylesheet" href="~/dist/site.css"/>
    <link rel="stylesheet" href="~/temp.css"/>
    <!--CSS-->
</head>
<body>
<div class="navbar-container col-lg-2 bgPrimary" id="navbar">
    <ul class="navbar-menu nav flex-column mb-auto" id="maincontent">
        <!--Logo-->
        <div class="logo" id="navbar-logo-id">
            <img src="/favicon.ico" alt="Logo">
        </div>
        <!--Logo-->
        
        <!--Name of the user-->
        <li class="navbar-nameuser" id="tohideAN" >
            @if (User.Identity.Name != null) { <a>Hi, @User.Identity.Name !</a> } else { <a>Hi, User!</a> }
        </li>
        <!--Name of the user-->
        
        <!--Buttons to navigate-->
        @if (User.IsInRole(UserRoles.SystemAdmin)) // If the user is a SystemAdmin
        {
            <li class="navbar-menu-item" id="tohideD">
                <a asp-action="Dashboard" asp-controller="SystemPlatform" aria-current="page">Dashboard</a>
            </li>
            <li class="navbar-menu-item" id="tohideS">
                <a asp-controller="Statistics" asp-action="Statistics" aria-current="page">Statistics</a>
            </li>
            @if (ViewContext.HttpContext.Request.Path.StartsWithSegments("/Statistics/Statistics"))
            {
                <li class="navbar-menu-item" id="tohideC">
                    <button id="exportAllCSV">Download all CSV's</button>
                </li>
            }
        }
        else if (User.IsInRole((UserRoles.PlatformAdmin))) // If the user is a PlatformAdmin
        {
            <li class="navbar-menu-item" id="tohideD">
                <a asp-action="Dashboard" asp-controller="SharedPlatform" aria-current="page">Dashboard</a>
            </li>
            <li class="navbar-menu-item" id="tohideS">
                <a asp-controller="Statistics" asp-action="Statistics" aria-current="page">Statistics</a>
            </li>
        }
        else if (User.IsInRole(UserRoles.Facilitator)) // If the user is a Facilitator
        {
            <li class="navbar-menu-item" id="tohideD">
                <a asp-action="Dashboard" asp-controller="Facilitator" aria-current="page">Dashboard</a>
            </li>
            <li class="navbar-menu-item" id="tohideS">
                <a asp-action="Facilitator" asp-controller="Flow" aria-current="page">Connect to kiosk</a>
            </li>
        }
        else
        {
            <li class="navbar-menu-item" id="tohideD">
                <a asp-action="Dashboard" asp-controller="SharedPlatform" aria-current="page">Dashboard</a>
            </li>
        }
        <li class="navbar-menu-item-logout" id="tohideLO">
            <form id="logoutForm" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                <button id="logout" type="submit">Logout</button>
            </form>
        </li>
        <!--Buttons to navigate-->

        <div class="d-flex">
            <div class="nav-nav-item" id="language">
                <button class="navbar-menu-item-language-button">NED</button>
            </div>

            <div class="nav-nav-item" id="collapseButton">
                <button class="navbar-menu-item-arrow-button" id="arrow-button">
                    <i id="nav-icon" class="bi bi-caret-left-fill" ></i>
                </button>
            </div>
        </div>
    </ul>
</div>
@RenderBody()
</body>
</html>

<!--JS-->
@await RenderSectionAsync("Scripts", required: false)
<script src="~/dist/navigation.entry.js" defer></script>
<script src="~/dist/site.entry.js" defer></script>
<!--JS-->